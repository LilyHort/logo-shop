function d(e){let t=new FormData(e),n=document.querySelector("#option");n?(console.log("\u0421\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0435 \u0447\u0435\u043A\u0431\u043E\u043A\u0441\u0430 option:",n.checked),t.set("option",n.checked?"on":"off")):console.log("\u0427\u0435\u043A\u0431\u043E\u043A\u0441 #option \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D!");let a=document.querySelector("#promo");a&&t.set("promo",a.value||"");let o=[];document.querySelectorAll(".card__item:not(.card__item-deleted)").forEach((l,p)=>{let y=l.querySelector(".card__title")?.textContent?.trim()||"",g=l.querySelector(".card__size-item--active .card__size-label")?.textContent?.trim()||"",q=l.querySelector(".card__color-item--active")?.classList.toString().match(/card__color-item--(\w+)/)?.[1]||"",S=l.querySelector(".card__price-quantity-input")?.value||"1",x=l.querySelector(".card__price-total .card__price-current")?.textContent?.replace(/[^\d]/g,"")||"0";o.push({id:p+1,title:y,size:g,color:q,quantity:parseInt(S,10),price:parseInt(x,10)})});let c=document.querySelector(".payment__input:checked"),s=c?c.value:"",m=document.querySelector("#promo")?.value?.trim()||"",v=document.querySelector("#option")?.checked||!1,h=document.querySelector(".total__final-value")?.textContent?.replace(/[^\d]/g,"")||"0",i={name:t.get("name")||"",surname:t.get("surname")||"",phone:t.get("phone")||"",email:t.get("email")||"",address:t.get("address")||"",paymentMethod:s,comment:t.get("comment")||"",promoCode:m,option:v,cartItems:o,totalAmount:parseInt(h,10),timestamp:new Date().toISOString(),userAgent:navigator.userAgent};console.log("=== \u0414\u0410\u041D\u041D\u042B\u0415 \u0417\u0410\u041A\u0410\u0417\u0410 ==="),console.log("FormData \u043E\u0431\u044A\u0435\u043A\u0442:",t),console.log("\u0421\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0435 FormData:");for(let[l,p]of t.entries())console.log(`${l}: ${p}`);console.log("\u0421\u0442\u0440\u0443\u043A\u0442\u0443\u0440\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 \u0437\u0430\u043A\u0430\u0437\u0430:",i),console.log("==================="),console.log("\u041A\u043E\u043D\u0442\u0430\u043A\u0442\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435:",{name:i.name,surname:i.surname,phone:i.phone,email:i.email,address:i.address}),console.log("\u0422\u043E\u0432\u0430\u0440\u044B \u0432 \u043A\u043E\u0440\u0437\u0438\u043D\u0435:",i.cartItems),console.log("\u0421\u043F\u043E\u0441\u043E\u0431 \u043E\u043F\u043B\u0430\u0442\u044B:",i.paymentMethod),console.log("\u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u0430\u044F \u043E\u043F\u0446\u0438\u044F (\u0441\u043E \u0441\u043A\u043B\u0430\u0434\u0430):",i.option),console.log("\u041F\u0440\u043E\u043C\u043E\u043A\u043E\u0434:",i.promoCode),console.log("\u0418\u0442\u043E\u0433\u043E\u0432\u0430\u044F \u0441\u0443\u043C\u043C\u0430:",i.totalAmount)}function _(e){let t=e.value.trim(),n=e.type,a=e.hasAttribute("required");e.classList.remove("error");let o=e.parentNode.querySelector(".contacts-personal__error");o&&o.remove();let r=!0,c="";return a&&!t&&(r=!1,c="\u042D\u0442\u043E \u043F\u043E\u043B\u0435 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E \u0434\u043B\u044F \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F"),e.name==="name"&&t&&(/^[а-яё\s]+$/i.test(t)||(r=!1,c="\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0442\u043E\u043B\u044C\u043A\u043E \u0431\u0443\u043A\u0432\u044B")),e.name==="surname"&&t&&(/^[а-яё\s]+$/i.test(t)||(r=!1,c="\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0442\u043E\u043B\u044C\u043A\u043E \u0431\u0443\u043A\u0432\u044B")),n==="email"&&t&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||(r=!1,c="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 email \u0430\u0434\u0440\u0435\u0441")),e.name==="phone"&&t&&(/^[\+]?[0-9\s\-\(\)]{10,}$/.test(t)||(r=!1,c="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 \u043D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430")),r||(e.classList.add("error"),E(e,c)),r}function E(e,t){let n=document.createElement("div");n.className="contacts-personal__error show",n.textContent=t,e.parentNode.appendChild(n)}function I(){document.querySelectorAll(".contacts-personal__input").forEach(t=>{t.addEventListener("blur",function(){_(this)}),t.addEventListener("input",function(){clearTimeout(this.validationTimeout),this.validationTimeout=setTimeout(()=>{_(this)},500)})})}function f(e){let t=[{name:"name",label:"\u0418\u043C\u044F"},{name:"surname",label:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F"},{name:"phone",label:"\u0422\u0435\u043B\u0435\u0444\u043E\u043D"},{name:"email",label:"Email"},{name:"address",label:"\u0410\u0434\u0440\u0435\u0441 \u0434\u043E\u0441\u0442\u0430\u0432\u043A\u0438"}],n=[];e.querySelectorAll(".contacts-personal__input").forEach(s=>{s.classList.remove("error")}),t.forEach(s=>{let m=e.querySelector(`[name="${s.name}"]`);(!m||!m.value.trim())&&(n.push(`${s.label} \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E \u0434\u043B\u044F \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F`),m&&m.classList.add("error"))}),document.querySelector(".payment__input:checked")||n.push("\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043F\u043E\u0441\u043E\u0431 \u043E\u043F\u043B\u0430\u0442\u044B");let r=e.querySelector('[name="email"]');r&&r.value.trim()&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.value.trim())||(n.push("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 email \u0430\u0434\u0440\u0435\u0441"),r.classList.add("error")));let c=e.querySelector('[name="phone"]');return c&&c.value.trim()&&(/^[\+]?[0-9\s\-\(\)]{10,}$/.test(c.value.trim())||(n.push("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 \u043D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430"),c.classList.add("error"))),n}function A(){let e=document.querySelector(".comment__input"),t=document.querySelector(".comment__validation"),n=document.querySelector(".comment__validation-count");if(!e||!t||!n)return;let a=142;function o(){let r=e.value.length;n.textContent=r,e.classList.remove("comment__input--error","comment__input--warning"),t.classList.remove("comment__validation--error","comment__validation--warning"),r>a?(e.classList.add("comment__input--error"),t.classList.add("comment__validation--error")):r>a-20&&(e.classList.add("comment__input--warning"),t.classList.add("comment__validation--warning"))}e.addEventListener("input",o),o()}function u(e){if(!Array.isArray(e)||e.length===0)return;let t=document.querySelector(".validation-errors");t&&t.remove();let n=document.createElement("div");n.className="validation-errors",n.setAttribute("role","alert"),n.setAttribute("aria-live","polite");let a=document.createElement("div");a.className="validation-errors__title",a.textContent="\u041E\u0448\u0438\u0431\u043A\u0438 \u0432\u0430\u043B\u0438\u0434\u0430\u0446\u0438\u0438:";let o=document.createElement("ul");o.className="validation-errors__list",e.forEach(r=>{if(typeof r=="string"&&r.trim()){let c=document.createElement("li");c.className="validation-errors__item",c.textContent=r.trim(),o.appendChild(c)}}),n.appendChild(a),n.appendChild(o),document.body.appendChild(n),setTimeout(()=>{n&&n.parentNode&&n.remove()},5e3)}function b(){try{let e=document.querySelector(".form"),t=document.querySelector(".total__button");if(!e||!t){console.warn("\u0424\u043E\u0440\u043C\u0430 \u0438\u043B\u0438 \u043A\u043D\u043E\u043F\u043A\u0430 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B");return}if(typeof f!="function"||typeof d!="function"){console.error("\u0424\u0443\u043D\u043A\u0446\u0438\u0438 \u0432\u0430\u043B\u0438\u0434\u0430\u0446\u0438\u0438 \u0438\u043B\u0438 \u0441\u0431\u043E\u0440\u0430 \u0434\u0430\u043D\u043D\u044B\u0445 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u043D\u044B");return}e.querySelectorAll(".contacts-personal__input").forEach(a=>{a&&typeof a.addEventListener=="function"&&a.addEventListener("input",function(){try{this.classList.remove("error");let o=document.querySelector(".validation-errors");o&&o.parentNode&&o.remove()}catch(o){console.warn("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0447\u0438\u0441\u0442\u043A\u0435 \u043E\u0448\u0438\u0431\u043E\u043A:",o)}})}),t.addEventListener("click",a=>{try{a.preventDefault();let o=f(e);if(Array.isArray(o)&&o.length>0){u(o);return}d(e)}catch(o){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0435 \u043A\u043B\u0438\u043A\u0430 \u043D\u0430 \u043A\u043D\u043E\u043F\u043A\u0443:",o),u(["\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0435 \u0444\u043E\u0440\u043C\u044B. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437."])}}),e.addEventListener("submit",a=>{try{a.preventDefault();let o=f(e);if(Array.isArray(o)&&o.length>0){u(o);return}d(e)}catch(o){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0435 \u0444\u043E\u0440\u043C\u044B:",o),u(["\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0435 \u0444\u043E\u0440\u043C\u044B. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437."])}})}catch(e){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u0438 \u0444\u043E\u0440\u043C\u044B \u0437\u0430\u043A\u0430\u0437\u0430:",e)}}export{A as initCommentValidation,I as initFormValidation,b as initOrderForm,u as showValidationErrors,f as validateForm};
