function f(){let t=document.querySelector(".total"),o=document.querySelector(".contacts-personal__map");if(console.log("\u0421\u0438\u043D\u0445\u0440\u043E\u043D\u0438\u0437\u0430\u0446\u0438\u044F \u0448\u0438\u0440\u0438\u043D\u044B \u043A\u0430\u0440\u0442\u044B:",{totalBlock:t,mapBlock:o,windowWidth:window.innerWidth}),t&&o&&window.innerWidth>=768){let n=t.offsetWidth;o.style.setProperty("--total-width",`${n}px`),console.log("\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u0430 \u0448\u0438\u0440\u0438\u043D\u0430 \u043A\u0430\u0440\u0442\u044B:",n)}}window.addEventListener("load",f);window.addEventListener("resize",f);var p="11d7d340d855116e8e9aaedbaefae9c02190e5e4",i=null,u=null;function v(){console.log("\u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u042F\u043D\u0434\u0435\u043A\u0441.\u041A\u0430\u0440\u0442\u044B..."),window.ymaps.ready(()=>{let t=document.querySelector(".contacts-personal__map"),o=document.querySelector("#address");if(console.log("\u042D\u043B\u0435\u043C\u0435\u043D\u0442\u044B \u043D\u0430\u0439\u0434\u0435\u043D\u044B:",{mapContainer:t,addressInput:o}),!t||!o){console.warn("\u042D\u043B\u0435\u043C\u0435\u043D\u0442\u044B \u043A\u0430\u0440\u0442\u044B \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B");return}t.classList.add("contacts-personal__map--visible"),console.log("\u041A\u043B\u0430\u0441\u0441 --visible \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D \u043A \u043A\u0430\u0440\u0442\u0435"),i=new window.ymaps.Map(t,{center:[55.751574,37.573856],zoom:10,controls:["zoomControl"]});let n,l=window.innerWidth;window.addEventListener("resize",()=>{clearTimeout(n),n=setTimeout(()=>{let c=window.innerWidth;if(i&&Math.abs(c-l)>50){let r=i.getCenter(),d=i.getZoom(),s=[];i.geoObjects.each(e=>{e.geometry.getType()==="Point"&&s.push({coords:e.geometry.getCoordinates(),properties:e.properties.getAll()})}),i.destroy(),i=new window.ymaps.Map(t,{center:r,zoom:d,controls:["zoomControl"]}),s.forEach(e=>{let a=new window.ymaps.Placemark(e.coords,e.properties,{preset:"islands#blackDotIcon"});i.geoObjects.add(a),u=a}),i.events.add("click",e=>{let a=e.get("coords");g(a),window.ymaps.geocode(a).then(w=>{let h=w.geoObjects.get(0).getAddressLine();o.value=h;let m=o.parentElement.querySelector(".contacts-personal__label");m&&(m.classList.add("contacts-personal__label--visible"),o.placeholder="")})}),l=c}},220)}),i.events.add("click",c=>{let r=c.get("coords");g(r),window.ymaps.geocode(r).then(d=>{let e=d.geoObjects.get(0).getAddressLine();o.value=e;let a=o.parentElement.querySelector(".contacts-personal__label");a&&(a.classList.add("contacts-personal__label--visible"),o.placeholder="")})})})}function g(t,o=""){if(!i)return;u&&i.geoObjects.remove(u),u=new window.ymaps.Placemark(t,{hintContent:o||"\u0412\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0439 \u0430\u0434\u0440\u0435\u0441",balloonContent:o||"\u041C\u0435\u0441\u0442\u043E\u043F\u043E\u043B\u043E\u0436\u0435\u043D\u0438\u0435"},{iconLayout:"default#image",iconImageHref:`data:image/svg+xml;base64,${btoa(`
      <svg width="27" height="39" viewBox="0 0 27 39" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M26.4283 13.1881C26.4283 20.4716 20.3428 32.1025 13.2141 38.6965C6.70158 32.7642 0 20.4716 0 13.1881C0 5.9045 5.91617 0 13.2141 0C20.5121 0 26.4283 5.9045 26.4283 13.1881Z" fill="black"/>
<circle cx="13.2141" cy="13.1881" r="8" fill="white"/>
</svg>
    `)}`,iconImageSize:[27,38],iconImageOffset:[-16,-16]}),i.geoObjects.add(u),i.setCenter(t,15);let n=document.querySelector(".contacts-personal__map");n&&n.classList.add("contacts-personal__map--visible")}function b(){let t=document.createElement("ul");return t.className="address-suggestions",t}function _(){let t=document.querySelector("#address");if(console.log("\u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F DaData:",{addressInput:t,DADATA_TOKEN:p}),!t){console.warn("\u041F\u043E\u043B\u0435 \u0430\u0434\u0440\u0435\u0441\u0430 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E");return}if(!p||p==="YOUR_DADATA_TOKEN"){console.warn("\u0422\u043E\u043A\u0435\u043D DaData \u043D\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043D");return}let o=t.parentElement;o.style.position="relative";let n=b();o.appendChild(n);let l;function c(s){return console.log("\u0417\u0430\u043F\u0440\u043E\u0441 \u043A DaData API:",s),fetch("https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/address",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Token ${p}`},body:JSON.stringify({query:s,count:5})}).then(e=>(console.log("\u041E\u0442\u0432\u0435\u0442 \u043E\u0442 DaData API:",e.status),e.json())).then(e=>(console.log("\u0414\u0430\u043D\u043D\u044B\u0435 \u043E\u0442 DaData:",e),e)).catch(e=>(console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u043F\u0440\u043E\u0441\u0430 \u043A DaData:",e),{suggestions:[]}))}function r(s){if(n.innerHTML="",s.length===0){n.classList.remove("address-suggestions--visible");return}s.forEach(e=>{let a=document.createElement("li");a.className="address-suggestions__item",a.textContent=e.value,a.addEventListener("click",()=>{d(e)}),n.appendChild(a)}),n.classList.add("address-suggestions--visible")}function d(s){t.value=s.value,n.classList.remove("address-suggestions--visible");let e=[parseFloat(s.data.geo_lat),parseFloat(s.data.geo_lon)];e[0]&&e[1]&&g(e,s.value);let a=t.parentElement.querySelector(".contacts-personal__label");a&&(a.classList.add("contacts-personal__label--visible"),t.placeholder="")}t.addEventListener("input",function(){let s=this.value.trim();if(clearTimeout(l),s.length<3){n.classList.remove("address-suggestions--visible");return}l=setTimeout(()=>{c(s).then(e=>{r(e.suggestions||[])})},300)}),document.addEventListener("click",s=>{o.contains(s.target)||n.classList.remove("address-suggestions--visible")})}function L(){let t=()=>{typeof window.ymaps<"u"?v():setTimeout(t,500)};t()}export{_ as initDaDataSuggestions,L as initMap};
